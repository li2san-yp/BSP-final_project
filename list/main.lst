C51 COMPILER V9.51   MAIN                                                                  09/11/2025 21:46:38 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\output\main.obj
COMPILER INVOKED BY: D:\Keil_C51\C51\BIN\C51.EXE source\main.c BROWSE INCDIR(.\inc) DEBUG OBJECTEXTEND PRINT(.\list\main
                    -.lst) TABS(2) OBJECT(.\output\main.obj)

line level    source

   1          #include "STC15F2K60S2.H"  //±ØÐë£¬"STC-BÑ§Ï°°å"Ê¹ÓÃMCUÖ¸¶¨µÄÍ·ÎÄ¼þ
   2          #include "sys.H"           //±ØÐë£¬sys£¨MySTC_OSµ÷¶È³ÌÐò£©Í·ÎÄ¼þ
   3          #include "displayer.H"     //¿ÉÑ¡£¬display£¨ÏÔÊ¾Ä£¿é£©Í·ÎÄ¼þ¡£
   4          #include "key.H"           //¿ÉÑ¡£¬key£¨°´¼üÄ£¿é£©Í·ÎÄ¼þ¡£
   5          #include "IR.h"            //¿ÉÑ¡£¬38KHzºìÍâÍ¨ÐÅ
   6          #include "Vib.h"           //¿ÉÑ¡£¬Vib£¨Õñ¶¯´«¸ÐÆ÷Ä£¿é£©Í·ÎÄ¼þ¡£
   7          #include "adc.h"           //¿ÉÑ¡£¬adc£¨ÈÈÃô¡¢¹âÃô¡¢µ¼º½°´¼ü¡¢À©Õ¹½Ó¿ÚADC£©Í·ÎÄ¼þ
   8          #include "beep.H"          //¿ÉÑ¡£¬beep£¨·äÃùÆ÷Ä£¿é£©Í·ÎÄ¼þ¡£
   9          #include "hall.H"          //¿ÉÑ¡£¬hall£¨»ô¶û´«¸ÐÆ÷Ä£¿é£©Í·ÎÄ¼þ¡£
  10          #include "music.h"         //¿ÉÑ¡£¬music£¨ÒôÀÖ²¥·Å£©Í·ÎÄ¼þ¡£
  11          #include "stepmotor.h"     //¿ÉÑ¡£¬²½½øµç»ú
  12          #include "uart1.h"         //¿ÉÑ¡£¬uart1£¨´®¿Ú1Í¨ÐÅ£©Í·ÎÄ¼þ¡£
  13          #include "uart2.h"         //¿ÉÑ¡£¬uart2£¨´®¿Ú2Í¨ÐÅ£©Í·ÎÄ¼þ¡£
  14          
  15          
  16          code unsigned long SysClock = 11059200;  // ±ØÐë¡£¶¨ÒåÏµÍ³¹¤×÷Ê±ÖÓÆµÂÊ(Hz)£¬ÓÃ»§±ØÐëÐÞ¸Ä³ÉÓëÊµ¼Ê¹¤×÷ÆµÂÊ£¨
             -ÏÂÔØÊ±Ñ¡ÔñµÄ£©Ò»ÖÂ
  17          #ifdef _displayer_H_                     // ÏÔÊ¾Ä£¿éÑ¡ÓÃÊ±±ØÐë¡££¨ÊýÂë¹ÜÏÔÊ¾ÒëÂë±í£¬ÓÃ‘ô¿ÉÐÞ¸Ä¡¢Ôö¼ÓµÈ£©
  18          code char decode_table[] = {
  19              // [0]-[9] Êý×Ö
  20              0x3f, 0x06, 0x5b, 0x4f, 0x66,
  21              0x6d, 0x7d, 0x07, 0x7f, 0x6f,
  22          
  23              0x00,  // ÎÞ- index = 10
  24              0x08,  // ÏÂ- index = 11
  25              0x40,  // ÖÐ- index = 12
  26              0x01,  // ÉÏ- index = 13
  27              0x41,  // ÉÏÖÐ- index = 14
  28              0x48,  // ÖÐÏÂ- index = 15
  29          
  30              // [16]-[25] ´øÐ¡ÊýµãµÄÊý×Ö
  31              0x3f | 0x80, 0x06 | 0x80, 0x5b | 0x80, 0x4f | 0x80, 0x66 | 0x80, 0x6d | 0x80, 0x7d | 0x80, 0x07 | 0x80
             -, 0x7f | 0x80, 0x6f | 0x80,
  32              // 'A' (´óÐ´ A)£¬index = 26
  33              0x77,
  34              // 'B' (´óÐ´ B)£¬index = 27
  35              0x7f,
  36              // 'C' (´óÐ´ C)£¬index = 28
  37              0x39,
  38              // 'D' (´óÐ´ D)£¬index = 29
  39              0x3f,
  40              // 'E' (´óÐ´ E)£¬index = 30
  41              0x79,
  42              // 'F' (´óÐ´ F)£¬index = 31
  43              0x71,
  44              // 'G' (´óÐ´ G)£¬index = 32
  45              0x7D,
  46              // 'H' (´óÐ´ H)£¬index = 33
  47              0x76,
  48              // 'I' (´óÐ´ I)£¬index = 34
  49              0x06,
  50              // 'J' (´óÐ´ J)£¬index = 35
  51              0x1E,
  52              // 'L' (´óÐ´ L)£¬index = 36
C51 COMPILER V9.51   MAIN                                                                  09/11/2025 21:46:38 PAGE 2   

  53              0x38,
  54              // 'O' (´óÐ´ O)£¬index = 37
  55              0x3F,
  56              // 'P' (´óÐ´ P)£¬index = 38
  57              0x73,
  58              // 'S' (´óÐ´ S)£¬index = 39
  59              0x6D,
  60              // 'U' (´óÐ´ U)£¬index = 40
  61              0x3E,
  62              // 'Y' (´óÐ´ Y)£¬index = 41
  63              0x6E,
  64          
  65              // 'a' (Ð¡Ð´ a)£¬index = 42
  66              0x5F,
  67              // 'b' (Ð¡Ð´ b)£¬index = 43
  68              0x7C,
  69              // 'c' (Ð¡Ð´ c)£¬index = 44
  70              0x58,
  71              // 'd' (Ð¡Ð´ d)£¬index = 45
  72              0x5E,
  73              // 'e' (Ð¡Ð´ e)£¬index = 46
  74              0x7B,
  75              // 'f' (Ð¡Ð´ f)£¬index = 47
  76              0x71,
  77              // 'g' (Ð¡Ð´ g)£¬index = 48
  78              0x6F,
  79              // 'h' (Ð¡Ð´ h)£¬index = 49
  80              0x74,
  81              // 'i' (Ð¡Ð´ i)£¬index = 50
  82              0x10,
  83              // 'l' (Ð¡Ð´ l)£¬index = 51
  84              0x38,
  85              // 'n' (Ð¡Ð´ n)£¬index = 52
  86              0x54,
  87              // 'o' (Ð¡Ð´ o)£¬index = 53
  88              0x5C,
  89              // 'p' (Ð¡Ð´ p)£¬index = 54
  90              0x73,
  91              // 'q' (Ð¡Ð´ q)£¬index = 55
  92              0x67,
  93              // 'r' (Ð¡Ð´ r)£¬index = 56
  94              0x50,
  95              // 's' (Ð¡Ð´ s)£¬index = 57
  96              0x6D,
  97              // 't' (Ð¡Ð´ t)£¬index = 58
  98              0x78,
  99              // 'u' (Ð¡Ð´ u)£¬index = 59
 100              0x1C,
 101              // 'y' (Ð¡Ð´ y)£¬index = 60
 102              0x6E};
 103          
 104          #endif
 105          
 106          extern void ShowTime(void);
 107          extern void ShowTemp(void);
 108          extern void ShowSpeed(void);    
 109              
 110          /*
 111          char displayMode = 0;
 112          void KeyHandler(void)
 113          {
 114              char k1 = GetKeyAct(enumKey1);
C51 COMPILER V9.51   MAIN                                                                  09/11/2025 21:46:38 PAGE 3   

 115              if (k1 == enumKeyPress) {
 116                  if (displayMode == 0)
 117                      displayMode = 1;
 118                  else 
 119                      displayMode = 0;
 120              }
 121          }
 122          
 123          void my1S_callback(void)
 124          {
 125              if (displayMode == 0)
 126                  GetTemp();
 127              else 
 128                  GetTime(); 
 129          }
 130          */
 131          
 132          void main() {
 133   1          AdcInit(ADCexpEXT);         //Ä£Êý×ª»»ADCÄ£¿éÇý¶¯£¨º¬ÎÂ¶È¡¢¹âÕÕ¡¢µ¼º½°´¼üÓë°´¼üKey3¡¢EXTÀ©Õ¹½Ó¿ÚÉÏµÄADC£
             -©
 134   1          DisplayerInit();      //ÏÔÊ¾Ä£¿éÇý¶¯ 
 135   1          KeyInit();           //°´¼üÄ£¿éÇý¶¯
 136   1          //BeepInit();       //·äÃùÆ÷Ä£¿éÇý¶¯
 137   1          //MusicPlayerInit();    //·äÃùÆ÷²¥·ÅÒôÀÖÇý¶¯
 138   1          //HallInit();          //»ô¶û´«¸ÐÆ÷Ä£¿éÇý¶¯                      
 139   1          //VibInit();          //Õñ¶¯´«¸ÐÆ÷Ä£¿éÇý¶¯  
 140   1          
 141   1          //StepMotorInit();    //²½½øµç»úÄ£¿éÇý¶¯                    
 142   1          // IrInit(NEC_R05d);         //38KHzºìÍâÍ¨ÐÅÄ£¿éÇý¶¯
 143   1          SetDisplayerArea(0, 7);
 144   1          SetEventCallBack(enumEventSys1S, ShowTime);
 145   1          //SetEventCallBack(enumEventKey, KeyHandler);
 146   1          MySTC_Init(); // ÏµÍ³³õÊ¼»¯£¬±ØÐë¡£
 147   1          while (1) {
 148   2              MySTC_OS();
 149   2          }
 150   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     37    ----
   CONSTANT SIZE    =     65    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
